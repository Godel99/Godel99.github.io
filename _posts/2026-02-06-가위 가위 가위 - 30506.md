---
title: "[Silver II] 가위 가위 가위 - 30506"
date: 2026-02-06
categories: [PS, BOJ] # BOJ, Programmers
tags: [차분 공격]
---
[문제 링크](https://www.acmicpc.net/problem/30506) 

## **풀이**
### 접근
첫 판에 가위만 100번을 내서 기계와의 승수만을 가지고 다음 판에서 기계가 어떤 손 모양을 낼지 알아맞추는 문제입니다.

### 차분 공격이란?
**입력을 아주 조금만 바꿨을 때, 출력이 어떻게 달라지는지를 관찰해서 내부의 숨겨진 구조를 알아내는 방법**입니다. 

첫 판에서 가위만 내서 승수를 알아냈기에 다음판에 **바위를 한 번 내서 나온 승수를 통해 대결 결과가 다르게 나온다**는 것을 알 수 있습니다.

* 머신이 가위를 냈다면 : 처음에는 비겼는데 이번에는 이겼습니다. 이긴 횟수가 1 증가합니다.
* 머신이 바위를 냈다면 : 처음에는 졌는데 이번에는 비겼습니다. 이긴 횟수는 그대로입니다.
* 머신이 보를 냈다면 : 처음에는 이겼는데 이번에는 졌습니다. 이긴 횟수가 1 감소합니다.

이를 통해서 기계의 손 모양을 짐작할 수 있게 됩니다.

## **구현**
<details markdown="1">
<summary>코드</summary>

```python
import sys
def print(*args, sep=" ", end="\n"): return sys.stdout.write(sep.join(map(str, args)) + end)
def input(): return sys.stdin.readline().rstrip()

def main():
    k = int(input())
    ans = ['0'] * 100
    hands = ['2'] * 100
    for i in range(100):
        hands[i] = '0'
        print('?', ''.join(hands))
        sys.stdout.flush()
        hands[i] = '2'
        newk = int(input())
        if k < newk: ans[i] = '2'
        elif k == newk: ans[i] = '0'
        else: ans[i] = '5'
    print('!', ''.join(ans))
    sys.stdout.flush()
if __name__ == '__main__':
    main()
```
```c++
#include<bits/stdc++.h>
using namespace std;
int ans[101];

int main(){
	int k, newk; cin >> k;
	for(int i = 1; i <= 100; i++){
		cout << "? ";
		for(int j = 1; j < i; j++) cout << 2;
		cout << 0;
		for(int j = i+1; j <= 100; j++) cout << 2;
		cout << endl;
		cin >> newk;
		if(k < newk) ans[i] = 2;
		else if(k == newk) ans[i] = 0;
		else ans[i] = 5;
	}
	cout << "! ";
	for(int i = 1; i <= 100; i++) cout << ans[i];
	cout << endl;
	return 0;
}
```
### 시간 및 공간 복잡도
* 시간복잡도: $\mathcal{O}(N^2)$
* 공간복잡도: $\mathcal{O}(1)$
